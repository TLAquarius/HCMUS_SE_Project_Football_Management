{% extends "base.html" %}

{% block title %}{{ season.name }}{% endblock %}

{% block sidebar %}
    {{ super() }} <!-- Include existing sidebar content from base.html -->
    <button class="btn btn-primary btn-block" onclick="window.location.href='{{ url_for('register_team', season_id=season.id) }}'">Đăng ký tham gia giải</button>
    <button class="btn btn-secondary btn-block" onclick="window.location.href='{{ url_for('search_player', season_id=season.id) }}'">Tra cứu cầu thủ</button>
    <button class="btn btn-secondary btn-block" onclick="window.location.href='{{ url_for('match_schedule', season_id=season.id) }}'">Lập lịch thi đấu</button>
    <button class="btn btn-secondary btn-block" onclick="window.location.href='{{ url_for('update_result', season_id=season.id) }}'">Cập nhật kết quả trận</button>
    <button class="btn btn-secondary btn-block" onclick="window.location.href='{{ url_for('search_team', season_id=season.id) }}'">Tra cứu đội tuyển</button>
    <button class="btn btn-danger btn-block" data-toggle="modal" data-target="#deleteModal">Xóa giải</button>
{% endblock %}

{% block content %}
<!-- Season Details -->
<h2 class="mb-4">{{ season.name }}</h2>
<p><strong>Thông Tin:</strong> {{ season.note }}</p>

<!-- Display Teams -->
<h3 class="mb-4">Các Đội Bóng</h3>
<div class="list-group">
    {% for team in teams %}
    <a href="#" class="list-group-item list-group-item-action">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{ team.name }}</h5>
            <small>{{ team.stadium }}</small>
        </div>
        <img src="{{ url_for('static', filename=team.profile_picture) }}" alt="{{ team.name }}" class="img-fluid rounded-circle" style="width: 40px; height: 40px;">
    </a>
    {% else %}
    <p>Không có đội bóng nào trong giải đấu này.</p>
    {% endfor %}
</div>

<!-- Modal for confirmation -->
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel">Xác nhận xóa giải</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Bạn có chắc chắn muốn xóa giải đấu này?
            </div>
            <div class="modal-footer">
                <form action="{{ url_for('delete_season', season_id=season.id) }}" method="post">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Không xóa</button>
                    <button type="submit" class="btn btn-danger">Xóa</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
