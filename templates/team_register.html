{% extends "base.html" %}

{% block title %}Đăng Ký Đội Bóng{% endblock %}

{% block sidebar %}
    <button class="btn btn-secondary btn-block" onclick="window.location.href='/'">Trang chủ</button>
    <button class="btn btn-secondary btn-block" onclick="window.location.href='{{ url_for('view_season', season_id=season_id) }}'">Trở về giải đấu</button>
{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">Đăng Ký Đội Bóng</h2>
    <form action="{{ url_for('register_team', season_id=season_id) }}" method="post" enctype="multipart/form-data">
        <input type="hidden" name="season_id" value="{{ season_id }}">

        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="teamName">Tên Đội Bóng</label>
                <input type="text" class="form-control" id="teamName" name="team_name" required>
            </div>
            <div class="form-group col-md-6">
                <label for="teamStadium">Tên Sân Nhà</label>
                <input type="text" class="form-control" id="teamStadium" name="team_stadium" required>
            </div>
            <div class="form-group col-md-6">
                <label for="teamLogo">Logo Đội Bóng</label>
                <input type="file" class="form-control-file" id="teamLogo" name="profile_picture" required>
            </div>
        </div>

        <div id="players-section">
            <h4>Cầu Thủ</h4>
            <div class="player-form">
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="playerName">Tên Cầu Thủ</label>
                        <input type="text" class="form-control" name="player_name[]" required>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="playerType">Loại Cầu Thủ</label>
                        <select class="form-control" name="player_type[]" required>
                            <option value="Trong nước">Trong nước</option>
                            <option value="Nước ngoài">Nước ngoài</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="playerBirthday">Ngày Sinh</label>
                        <input type="date" class="form-control" name="player_birthday[]" required>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="playerNote">Ghi Chú</label>
                        <input type="text" class="form-control" name="player_note[]">
                    </div>
                    <div class="form-group col-md-6">
                        <label for="playerProfilePicture">Ảnh Đại Diện</label>
                        <input type="file" class="form-control-file" name="player_profile_picture[]">
                    </div>
                </div>
            </div>
        </div>

        <button type="button" class="btn btn-secondary" onclick="addPlayer()">Thêm Cầu Thủ</button>
        <button type="submit" class="btn btn-primary">Xác Nhận</button>
    </form>
</div>

<script>
function addPlayer() {
    var section = document.getElementById('players-section');
    var newPlayer = document.querySelector('.player-form').cloneNode(true);
    var inputs = newPlayer.querySelectorAll('input, select');
    inputs.forEach(function(input) {
        input.value = '';
    });
    section.appendChild(newPlayer);
}
</script>
{% endblock %}
